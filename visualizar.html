<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizar Usuário</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-light">

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card shadow-lg">
                    <div class="card-header d-flex justify-content-between align-items-center bg-dark text-white">
                        <h5 class="mb-0"><i class="bi bi-person-badge"></i> Visualizar Usuário</h5>
                        <div>
                            <button class="btn btn-outline-light btn-sm me-2" onclick="window.location.href='index.html'">
                                <i class="bi bi-arrow-left"></i> Voltar
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="visualizarConteudo">
                            <!-- Conteúdo será preenchido via JavaScript -->
                        </div>
                    </div>
                    <div class="card-footer text-end">
                        <button class="btn btn-danger" onclick="window.location.href='index.html'">
                            <i class="bi bi-x-circle"></i> Fechar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simulação dos dados do usuário (pode ser substituído por fetch ou query params)
        const usuarios = {
            1: {
                id: 1,
                matricula: '001',
                nome: 'Marcus Vinicius do Vale de Jesus Cunha',
                email: 'marcuskn377@gmail.com',
                telefone: '(21)98653-8097',
                funcao: 'Escalador',
                nivel: 'I',
                cpf: '123.456.789-00',
                dataNascimento: '1990-05-15',
                admissao: '2020-01-10',
                demissional: '-',
                cep: '20000-000',
                cidade: 'Rio de Janeiro',
                logradouro: 'Av. Rio Branco, 123',
                foto: 'img/foto.png'
            },
            2: {
                id: 2,
                matricula: '002',
                nome: 'Ana Silva',
                email: 'anasilva@gmail.com',
                telefone: '(21)98765-4321',
                funcao: 'Artífice',
                nivel: 'II',
                cpf: '987.654.321-00',
                dataNascimento: '1989-04-12',
                admissao: '2021-07-01',
                demissional: '-',
                cep: '20000-001',
                cidade: 'Rio de Janeiro',
                logradouro: 'Rua das Flores, 456',
                foto: 'img/foto2.png'
            }
        };

        // Tenta obter um id via query string: ?id=1
        function getQueryParam(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name);
        }

        function formatDate(dateStr) {
            if (!dateStr || dateStr === '-') return '-';
            const d = new Date(dateStr);
            if (isNaN(d)) return dateStr;
            return d.toLocaleDateString('pt-BR');
        }

        function preencherVisualizacao() {
            const idParam = getQueryParam('id') || '1';
            const usuario = usuarios[idParam] || usuarios[1];

            const conteudo = `
                <div class="row mb-3">
                    <div class="col-md-3 text-center">
                        <img src="${usuario.foto ? usuario.foto : 'https://via.placeholder.com/150x200.png?text=3x4'}" alt="Foto 3x4" class="img-thumbnail mb-2" style="width:150px;height:200px;object-fit:cover;">
                    </div>
                    <div class="col-md-9">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <strong>Matrícula:</strong>
                                <p>${usuario.matricula}</p>
                            </div>
                            <div class="col-md-6">
                                <strong>Nome:</strong>
                                <p>${usuario.nome}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <strong>Email:</strong>
                                <p>${usuario.email}</p>
                            </div>
                            <div class="col-md-6">
                                <strong>Telefone:</strong>
                                <p>${usuario.telefone}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <strong>Função:</strong>
                                <p>${usuario.funcao}</p>
                            </div>
                            <div class="col-md-6">
                                <strong>Nível:</strong>
                                <p>${usuario.nivel}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <strong>CPF:</strong>
                                <p>${usuario.cpf}</p>
                            </div>
                            <div class="col-md-6">
                                <strong>Data de Nascimento:</strong>
                                <p>${formatDate(usuario.dataNascimento)}</p>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <strong>Admissão:</strong>
                                <p>${formatDate(usuario.admissao)}</p>
                            </div>
                            <div class="col-md-6">
                                <strong>Demissional:</strong>
                                <p>${formatDate(usuario.demissional)}</p>
                            </div>
                        </div>
                        
                        <div class="row mb-2">
                            <div class="col-md-4">
                                <strong>CEP:</strong>
                                <p>${usuario.cep}</p>
                            </div>
                            <div class="col-md-4">
                                <strong>Cidade:</strong>
                                <p>${usuario.cidade}</p>
                            </div>
                            <div class="col-md-4">
                                <strong>Logradouro:</strong>
                                <p>${usuario.logradouro}</p>
                            </div>
                            <div class="col-md-4">
                                <strong>ASO:</strong>
                                <p><a href="img/aso.png" target="_blank" class="btn btn-sm btn-outline-primary"><i class="bi bi-file-earmark-pdf"></i> Ver ASO</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('visualizarConteudo').innerHTML = conteudo;
        }

        document.addEventListener('DOMContentLoaded', preencherVisualizacao);
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
